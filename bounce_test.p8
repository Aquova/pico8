pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
function _init()
	particles={}
	poke(0x5f2d,1)
	mx=stat(32)
	my=stat(33)
end

function _update60()
	local newx=stat(32)
	local newy=stat(33)
	
	if mx~=newx or my~=newy then
		for _=1,5 do
			local newp=newpart(newx,newy)
			add(particles,newp)
		end
	end
	
	for p in all(particles) do
		p:update()
	end
	
	mx,my=newx,newy
end

function _draw()
	cls()
	
	for p in all(particles) do
		p:draw()
	end
	
	spr(1,mx,my)
	
	print(stat(9),5,5,7)
	print(stat(1).."%",5,12,7)
end

function newpart(x,y)
	local p={
		x=x,
		y=y,
		dx=rnd(5)-2,
		dy=-rnd(5),
		c=flr(rnd(5))+8
	}
	
	function p:update()
		p.dy+=1
		p.x+=p.dx
		p.y+=p.dy
		
		if p.y>=128 then
			p.dy*=-1
			p.y=127
		end
		if p.x<=0 or p.x>=128 then
			p.dx*=-1
			p.x=mid(1,p.x,127)
		end
	end
	
	function p:draw()
		pset(p.x,p.y,p.c)
	end
	
	return p
end


__gfx__
00000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000575000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700577500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000577750000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000577775000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700577550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000055750000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
