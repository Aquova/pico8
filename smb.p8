pico-8 cartridge // http://www.pico-8.com
version 15
__lua__
-- smb
-- by aquova

floor=128-(8*3)

function _init()
	-- mario's x,y pos, height and width, and flip
	mario={x=8,y=88,h=16,w=16,f=false}
	oldx=mario.x
	ani_frames={1,3,5,7}
	cur_frame=1
	frame_count=0
	cam={x=0,y=0}
	--music(0)
end

function jump()
	starty=mario.y
	while mario.y > starty-30 do
		mario.y-=3
		_draw()		
	end		
end

function animate()
	if oldx==mario.x then
		cur_frame=1
	else
		if (frame_count%2==0) then
			cur_frame+=1
			if cur_frame > 4 then
				cur_frame=2
			end
		end
	end
	oldx=mario.x
	frame_count+=1
end

function _update()
	local speed=2
	local buffer=10
	animate()
	
	if mario.y < 88 then
		mario.y+=3
	elseif mario.y > 88 then
		mario.y=88
	end 
	
	if btn(0) then
		mario.x-=speed
		mario.f=true
		-- this would allow backwards movement
		--if (mario.x-cam.x < (64-buffer)) then
		--	cam.x-=speed
		--end
		
		-- this is authentic to the game
		if mario.x-cam.x < 0 then
			mario.x=cam.x
		end
	end
	if btn(1) then
		mario.x+=speed
		mario.f=false
		if (mario.x-cam.x > (64+buffer)) then
			cam.x+=speed
		end
	end
	
	if btnp(4) then
		jump()	
	end

	if btnp(5) then
		_init()
	end

end

function _draw()
	cls()
	camera(cam.x,cam.y)
	map(0,0,0,0,128,32)
	spr(ani_frames[cur_frame],mario.x,mario.y,2,2,mario.f,false)
end
__gfx__
000000000000088888000000000000000000000000000888880000000000088888000000f444444440f44440cccccccccccccccccccccccc0000000000000000
000000000000888888888000000008888800000000008888888880000000888888888000f444444440f44440cccccccccccccccccccccccc0000000000000000
007007000000333993900000000088888888800000003339939000000000333993900000004444440f444440cccccccccccccccccccccccc0000000000000000
000770000003939993999000000033399390000000039399939990000003939993999000ff0044440f444440cccccccccccccccccccccccc0000000000000000
000770000003933999399900000393999399900000039339993999000003933999399900f4ff0000f4444440cccccccccccccccccccccccc0000000000000000
007007000003399993333000000393399939990000033999933330000003399993333000f444fff0f4444440ccccccccccccc000000ccccc0000000000000000
000000000000099999990000000339999333300000000999999900000000099999990000f4444440f4444400cccccccccc000333333000cc0000000000000000
00000000000033833300000000000999999900000000338333000000003333883300000040000004f0000004cccccccc00333333333333000000000000000000
0000000000033383383330000000333383090000000333388330000099333388833399904ffffffff04ffff4ccccccc033333333333330330ccccccc00000000
000000000033338888333300000933333399900000033388988900009990338988833990f444444440f44440cccccc03333333333333000330cccccc00000000
000000000099389889839900009983333399000000033338888800009900888888800300f444444440f44440ccccc0333333333333330003330ccccc00000000
000000000099988888899900003388888880000000083399988800000008888888883300f444444440f44440cccc033333333333333300033330cccc00000000
000000000099888888889900003888888880000000008399888000000088888888883300f444444440f04440ccc03333333333333003000333330ccc00000000
000000000000888008880000033888088800000000000888333000000338880008883300f444444440400004cc0333333333333330033033333330cc00000000
000000000003330000333000030000333000000000000333333300000333000000000000f444444440fffff0c033333333333333300333333333330c00000000
000000000033330000333300000000333300000000000333300000000033300000000000f444444440f444400333333333333333300333333333333000000000
00000000c44444444444444cffffffff00000000cccccc0000cccccc000000000000000000000000000000000000000000000000000000000000000000000000
0000000049999999999999904444444000000000ccccc0bbbb0ccccc000000000000000000000000000000000000000000000000000000000000000000000000
0000000049099999999990904444444000000000ccc00bbbbbb0cccc000000000000000000000000000000000000000000000000000000000000000000000000
0000000049999444449999900000000000000000cc0bbbbbbbb0c0cc000000000000000000000000000000000000000000000000000000000000000000000000
0000000049994400044999904440444400000000cc0bbbbbbbbb0b0c000000000000000000000000000000000000000000000000000000000000000000000000
0000000049994409944099904440444400000000cc0bbbbbb3bbbbb0000000000000000000000000000000000000000000000000000000000000000000000000
0000000049994409944099904440444400000000c0bbb33bbb3bbbb0000000000000000000000000000000000000000000000000000000000000000000000000
00000000499990094440999000000000000000000bbb3bbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000
00000000499999944000999044444440ccccc000bbbbbbbb000000000cc0cccc0000000000000000000000000000000000000000000000000000000000000000
00000000499999944099999044444440cccc0bbbbbbbbbbb000000000c0b0ccc0000000000000000000000000000000000000000000000000000000000000000
00000000499999990099999044444440ccc0bbbbbbbbbbbb00000000b0bb0ccc0000000000000000000000000000000000000000000000000000000000000000
00000000499999944999999000000000cccbbbbbbbbbbbbb00000000bbbb0c0c0000000000000000000000000000000000000000000000000000000000000000
00000000499999944099999044404444c00bbbbbbbbbbbbb00000000bbbbb0b00000000000000000000000000000000000000000000000000000000000000000
000000004909999900999090444044440bbbbbbbbbbbbbbb00000000bbbbbbb00000000000000000000000000000000000000000000000000000000000000000
000000004999999999999990444044440bbbbbbbbbbbbbbb00000000bbbbbbb00000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000c0bbbbbbbbbbbbbb00000000bbbbbb0c0000000000000000000000000000000000000000000000000000000000000000
__map__
0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b21220b0b0b0b0b232321222323212223230b0b0b0b0b0b0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b31320b0b0b0b0b333331323333313233330b0b0b0b0b0b0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b0b0b0b0c0d0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b0b0b1b1c1d1e0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b0b1b1c1c1c1c1e0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0c0d0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b1b1c1d1c1c1d1c1e0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b2526252625260b0b0b1b1c1d1e0b0b0b0b0b0b0b0b0b0b0b25260b0b0b0b0b0b0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1b1c1c1c1c1c1c1c1c1e0b0b0b0b0b0b0b0b0b0b0b0b0b34353535353535370b1b1c1c1c1c1e0b0b0b0b0b0b0b0b0b343535370b0b0b0b0b0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a190b0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
090a090a090a090a090a090a090a090a090a090a090a090a090a090a090a090a090a090a090a090a090a090a090a090a090a090a090a0900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a191a1900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0010000d28050280500000028050000002405028050000002b05000000000001f0501f05000000000000000000000070000000009000000000b000000000a0000900009000070000400007000090000900005000
0010000d12050120500c000120500c00012050120500c000180500000000000150501505000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0010000d0e0500e050000000e050000000e0500e05000000130500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00100000180511805100000130500000015050000001705000000160501505015050130501c0501f05021050210501d0501f050000001c05000000180501a0501705000000000000000000000000000000000000
001000001c0501c050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00100019130501305000000100500000011050000001505000000140501105011050100500c0501005011050110501005010050000000e05000000130500c0501505000000000000000000000000000000000000
__music__
00 01020344
00 04050644

